<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>波币钱包快速赚钱指南</title>
  <style>
    *,
    html {
      margin: 0;
      padding: 0;
      scrollbar-width: none;
    }

    body {
      width: 100vw;
      height: 100vh;
      margin: 0;
      padding: 0;
      background: #fff;
      font-family: PingFang SC;
      font-size: 14px;
      color: #000;
      user-select: none;
      -moz-user-select: none;
      -webkit-user-select: none;
      -ms-user-select: none;
    }

    .container::-webkit-scrollbar {
      width: 0px;
      background: transparent;
    }

    .container .step-list {
      flex: 1;
      display: flex;
      flex-direction: column;
      width: 100%;
      height: 100%;
    }

    .container .step-list .step {
      display: flex;
      width: 100%;
      height: auto;
      opacity: 0;
      transition: opacity 0.3s ease-in-out;
    }

    .container .step-list .step.loaded {
      opacity: 1;
    }

    .container .step-list .step .img {
      width: 100%;
      height: auto;
    }

    .container .step-list .step a {
      outline: none;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    }

    .container .step-list .step .video-list {
      padding: 0 15px;
    }

    .container .step-list .step .video-list .video-wrapper {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-bottom: 20px;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0px 4px 15px 0px rgba(122, 136, 182, 0.1490196078);
    }

    .container .step-list .step .video-list .video-wrapper video {
      width: 100%;
      height: 100%;
    }

    .container .step-list .step.step3 {
      position: relative;
    }

    .container .step-list .step.step3 .step_one_absolute_content {
      position: absolute;
      bottom: 15px;
      right: 5%;
      left: 5%;
      z-index: 1;
    }

    .container .step-list .step.step3 .step_one_absolute_child_content {
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: flex;
      flex-direction: column;
      position: absolute;
      justify-content: center;
    }

    .container .step-list .step.step5 {
      position: relative;
    }

    .container .step-list .step.step5 .step_two_absolute_content {
      width: 38%;
      bottom: 22.5%;
      right: 5%;
      left: 5%;
      position: absolute;
      z-index: 1;
    }

    .container .step-list .step.step5 .step_two_absolute_child_content {
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: flex;
      flex-direction: column;
      position: absolute;
      justify-content: center;
    }

    .container .step-list .step.step5 .cover_child {
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      margin: 3%;
      margin-top: 0;
      flex: 1;
    }

    .container .step-list .step.step5 .cover_child .row {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    /* Loading indicator */
    .loading-indicator {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 16px;
      color: #666;
      z-index: 1000;
    }

    .loading-progress {
      width: 200px;
      height: 4px;
      background: #f0f0f0;
      border-radius: 2px;
      margin-top: 10px;
      overflow: hidden;
    }

    .loading-bar {
      height: 100%;
      background: linear-gradient(90deg, #4CAF50, #81C784);
      border-radius: 2px;
      width: 0%;
      transition: width 0.3s ease;
    }

    /* Click feedback */
    .button-action {
      transition: transform 0.1s ease;
    }

    .button-action:active {
      transform: scale(0.95);
    }

    /* Skeleton loader for better UX */
    .step-skeleton {
      width: 100%;
      height: 200px;
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200% 100%;
      animation: skeleton-loading 2s infinite;
    }

    @keyframes skeleton-loading {
      0% {
        background-position: 200% 0;
      }
      100% {
        background-position: -200% 0;
      }
    }
  </style>
</head>

<body>
  <div class="loading-indicator">
    <div>加载中... <span id="progress-text">0%</span></div>
    <div class="loading-progress">
      <div class="loading-bar" id="progress-bar"></div>
    </div>
  </div>

  <div class="container">
    <div class="step-list">
      <div class="step step1" data-step="1">
        <div class="step-skeleton"></div>
        <img class="img app" data-src="assets/images/app/1.jpg" style="display: none;" />
        <img class="img web" data-src="assets/images/web/1.jpg" style="display: none;" />
      </div>
      <div class="step step2" data-step="2">
        <div class="step-skeleton"></div>
        <img class="img app" data-src="assets/images/app/2.jpg" style="display: none;" />
        <img class="img web" data-src="assets/images/web/2.jpg" style="display: none;" />
      </div>
      <div class="step step3" data-step="3">
        <div class="step-skeleton"></div>
        <img class="img app" data-src="assets/images/app/3.jpg" style="display: none;" />
        <img class="img web" data-src="assets/images/web/3.jpg" style="display: none;" />

        <div class="step_one_absolute_content">
          <div style="position: relative;">
            <img data-src="assets/images/rectangle_1.png" style="width: 100%;" />

            <div class="step_one_absolute_child_content">
              <div class="usdt-title">
                <img data-src="assets/images/usdt_title.png" style="width: 50%; margin: 3%; margin-bottom: 0;" />
              </div>
              <div style="display: flex; margin: 3%; margin-top: 0;">
                <div style="flex: 1; text-align: center; margin-right: 8px;">
                  <a href="#" data-url="https://www.huobi.com/support/zh-cn/detail/44877723881747" class="button-action">
                    <img data-src="assets/images/huobi_thumbnail.png" style="width: 100%; margin-bottom: 5px;" />
                    <img data-src="assets/images/button_click.gif" style="width: 80%;" />
                  </a>
                </div>
                <div style="flex: 1; text-align: center; margin-right: 8px;">
                  <a href="#" data-url="https://www.binance.com/zh-TC/support/faq/如何在幣安-c2c-網站買入加密貨幣-360043832851" class="button-action">
                    <img data-src="assets/images/binance_thumbnail.png" style="width: 100%; margin-bottom: 5px;" />
                    <img data-src="assets/images/button_click.gif" style="width: 80%;" />
                  </a>
                </div>
                <div style="flex: 1; text-align: center;">
                  <a href="#" data-url="https://www.okx.com/cn/learn/how-to-buy-and-sell-on-okx-c2c" class="button-action">
                    <img data-src="assets/images/okx_thumbnail.png" style="width: 100%; margin-bottom: 5px;" />
                    <img data-src="assets/images/button_click.gif" style="width: 80%;" />
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="step step4" data-step="4">
        <div class="step-skeleton"></div>
        <img class="img app" data-src="assets/images/app/4.jpg" style="display: none;" />
        <img class="img web" data-src="assets/images/web/4.jpg" style="display: none;" />
      </div>
      <div class="step step5" data-step="5">
        <div class="step-skeleton"></div>
        <img class="img app" data-src="assets/images/app/5.jpg" style="width: 100%; display: none;" />
        <img class="img web" data-src="assets/images/web/5.jpg" style="width: 100%; display: none;" />

        <div class="step_two_absolute_content">
          <div style="position: relative;">
            <img data-src="assets/images/rectangle_2.png" style="width: 100%;" />

            <div class="step_two_absolute_child_content">
              <div class="cover_child">
                <div class="row">
                  <a href="#" data-url="https://www.huobi.com.gt/support/zh-cn/detail/34893278495346?invite_code=xb6z7223&inviter_id=11353960" style="width: 62%; padding-top: 5px;" class="button-action">
                    <img data-src="assets/images/huobi_title.png" style="width: 100%;" />
                    <img data-src="assets/images/button_click.gif" style="width: 100%;" />
                  </a>
                </div>
                <div class="row">
                  <a href="#" data-url="https://www.binance.com/zh-TC/support/faq/充值与提币新手指引-85a1c394ac1d489fb0bfac0ef2fceafd" style="width: 62%; padding-top: 5px;" class="button-action">
                    <img data-src="assets/images/binance_title.png" style="width: 100%;" />
                    <img data-src="assets/images/button_click.gif" style="width: 100%;" />
                  </a>
                </div>
                <div class="row">
                  <a href="#" data-url="https://www.okx.com/cn/learn/extract-crypto-assets-app" style="width: 62%; padding-top: 5px;" class="button-action">
                    <img data-src="assets/images/okx_title.png" style="width: 100%;" />
                    <img data-src="assets/images/button_click.gif" style="width: 100%;" />
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="step step6" data-step="6">
        <div class="step-skeleton"></div>
        <img class="img app" data-src="assets/images/app/6.jpg" style="display: none;" />
        <img class="img web" data-src="assets/images/web/6.jpg" style="display: none;" />
      </div>
      <div class="step step7" data-step="7">
        <div class="step-skeleton"></div>
        <img class="img app" data-src="assets/images/app/7.jpg" style="display: none;" />
        <img class="img web" data-src="assets/images/web/7.jpg" style="display: none;" />
      </div>
      <div class="step step8" data-step="8">
        <div class="step-skeleton"></div>
        <img class="img app" data-src="assets/images/app/8.jpg" style="display: none;" />
        <img class="img web" data-src="assets/images/web/8.jpg" style="display: none;" />
      </div>
    </div>
  </div>

  <script type="text/javascript">
    (function() {
      // Cache configuration and DOM elements
      const urlParams = new URLSearchParams(window.location.search);
      const isApp = urlParams.get('displayInApp') === 'true';
      const container = document.querySelector('.container');
      const loadingIndicator = document.querySelector('.loading-indicator');
      const progressBar = document.getElementById('progress-bar');
      const progressText = document.getElementById('progress-text');

      let currentStep = 0;
      let totalSteps = 8;
      let loadingFinished = false;

      // Optimized message sender
      const sendLoadingState = (function() {
        let timeoutId;
        return function(loading, progress = 0) {
          if (loadingFinished && loading) return;
          clearTimeout(timeoutId);
          timeoutId = setTimeout(() => {
            window.parent?.postMessage({
              title: '波币钱包快速赚钱指南',
              loading: loading,
              progress: progress
            }, '*');
            if (!loading) loadingFinished = true;
          }, 0);
        };
      })();

      // Update progress indicator
      function updateProgress(step) {
        const progress = Math.round((step / totalSteps) * 100);
        progressBar.style.width = `${progress}%`;
        progressText.textContent = `${progress}%`;
        sendLoadingState(step < totalSteps, progress);
      }

      // Load images for a specific step
      function loadStepImages(stepElement, callback) {
        const images = stepElement.querySelectorAll('img[data-src]');
        let loadedCount = 0;
        const totalImages = images.length;

        if (totalImages === 0) {
          callback();
          return;
        }

        images.forEach(img => {
          const actualImg = new Image();

          actualImg.onload = function() {
            img.src = this.src;
            img.removeAttribute('data-src');
            img.style.display = isApp ?
              (img.classList.contains('app') ? 'block' : 'none') :
              (img.classList.contains('web') ? 'block' : 'none');

            loadedCount++;
            if (loadedCount === totalImages) {
              callback();
            }
          };

          actualImg.onerror = function() {
            loadedCount++;
            if (loadedCount === totalImages) {
              callback();
            }
          };

          actualImg.src = img.getAttribute('data-src');
        });
      }

      // Load next step sequentially
      function loadNextStep() {
        if (currentStep >= totalSteps) {
          // All steps loaded
          loadingIndicator.style.display = 'none';
          container.style.opacity = '1';
          loadingFinished = true;
          sendLoadingState(false, 100);
          return;
        }

        const stepElement = container.querySelector(`[data-step="${currentStep + 1}"]`);
        if (!stepElement) {
          currentStep++;
          loadNextStep();
          return;
        }

        loadStepImages(stepElement, () => {
          // Remove skeleton and show content
          const skeleton = stepElement.querySelector('.step-skeleton');
          if (skeleton) {
            skeleton.remove();
          }

          stepElement.classList.add('loaded');
          currentStep++;
          updateProgress(currentStep);

          // Load next step with a small delay for better UX
          setTimeout(loadNextStep, 100);
        });
      }

      // Handle URL opening
      function openWebBrowser(url) {
        if (!url) return;

        try {
          if (isApp) {
            window?.flutter?.call('jumpTo', {
              url: `app://web?target=1&url=${encodeURIComponent(url)}`
            }, null);
          } else {
            if (window?.flutter) {
              let openUrl = `app://web?target=1&url=${encodeURIComponent(url)}`;
              window?.open(openUrl, '_blank');
            } else {
              window?.parent?.postMessage({
                type: 'OPEN_URL',
                url: url
              }, '*');
            }
          }
        } catch (error) {
          console.error('Error opening URL:', error);
          window?.open(url, '_blank');
        }
      }

      // Setup click handlers
      function setupClickHandlers() {
        container.addEventListener('click', function(e) {
          const link = e.target.closest('a[data-url]');
          if (link) {
            e.preventDefault();
            e.stopPropagation();

            const url = link.getAttribute('data-url');
            if (url) {
              // Add visual feedback
              link.style.transform = 'scale(0.95)';
              setTimeout(() => {
                link.style.transform = '';
              }, 100);

              openWebBrowser(url);
            }
          }
        }, { passive: false });
      }

      // Initialize
      function initialize() {
        // Setup display mode
        const appElements = container.querySelectorAll('.app');
        const webElements = container.querySelectorAll('.web');

        if (isApp) {
          webElements.forEach(el => el.style.display = 'none');
        } else {
          appElements.forEach(el => el.style.display = 'none');
        }

        // Start sequential loading
        updateProgress(0);
        sendLoadingState(true, 0);

        // Setup click handlers
        setupClickHandlers();

        // Start loading first step
        setTimeout(loadNextStep, 300);
      }

      // Start when DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initialize, { once: true });
      } else {
        initialize();
      }
    })();
  </script>
</body>

</html>